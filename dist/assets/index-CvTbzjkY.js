(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function u(){return new Date().toDateString()}let a=JSON.parse(localStorage.getItem("nt_trackers"))||[],d=JSON.parse(localStorage.getItem("nt_groups"))||["Genel","Hafta İçi","Hafta Sonu"],l=JSON.parse(localStorage.getItem("nt_today"))||{date:u(),ms:0};l.date!==u()&&(l={date:u(),ms:0},I());let f="Hepsi",v=null;const w={cyan:{color:"var(--neon-cyan)",glow:"var(--neon-cyan-glow)",bg:"var(--neon-cyan-bg)"},purple:{color:"var(--neon-purple)",glow:"var(--neon-purple-glow)",bg:"var(--neon-purple-bg)"},blue:{color:"var(--neon-blue)",glow:"rgba(43,144,255,0.4)",bg:"rgba(43,144,255,0.15)"}};let p="cyan";const O=document.getElementById("val-total-today"),R=document.getElementById("live-count"),S=document.getElementById("groups-filter"),b=document.getElementById("trackers-list"),y=document.getElementById("modal-task"),x=document.getElementById("btn-initiate"),D=document.getElementById("btn-cancel-task"),G=document.getElementById("btn-save-task"),T=document.getElementById("input-task-name"),m=document.getElementById("select-task-group"),H=document.getElementById("btn-new-group-prompt"),P=document.getElementById("input-task-interval"),M=document.querySelectorAll(".color-btn");function _(){h(),E(),c(),B(),K(),N()}function g(){localStorage.setItem("nt_trackers",JSON.stringify(a))}function J(){localStorage.setItem("nt_groups",JSON.stringify(d))}function I(){localStorage.setItem("nt_today",JSON.stringify(l))}function N(){"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()}function q(n,e){"Notification"in window&&Notification.permission==="granted"&&navigator.serviceWorker.ready.then(t=>{t.showNotification(n,{body:e,icon:"/vite.svg",vibrate:[200,100,200]})}).catch(()=>{new Notification(n,{body:e,icon:"/vite.svg"})})}function E(){m.innerHTML="",d.forEach(n=>{const e=document.createElement("option");e.value=n,e.textContent=n,m.appendChild(e)})}function h(){S.innerHTML="",["Hepsi",...d].forEach(e=>{const t=document.createElement("button");t.className=`group-tab ${f===e?"active":""}`,t.textContent=e,t.onclick=()=>{f=e,h(),c()},S.appendChild(t)})}function c(){b.innerHTML="";let n=a;f!=="Hepsi"&&(n=a.filter(t=>t.group===f));let e=0;n.forEach(t=>{t.isRunning&&e++;const s=w[t.color]||w.cyan,i=t.isRunning?t.elapsedMs+(Date.now()-t.lastStartTime):t.elapsedMs,o=document.createElement("div");o.className=`tracker-item ${t.isRunning?"active":""}`,o.style.setProperty("--item-color",s.color),o.style.setProperty("--item-glow",s.glow),o.style.setProperty("--item-bg",s.bg),o.innerHTML=`
      <div class="tracker-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          ${t.isRunning?'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>':'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>'}
        </svg>
      </div>
      <div class="tracker-info">
        <h4>${t.name}</h4>
        <div class="tracker-time">${z(i)}</div>
      </div>
      <button class="play-pause-btn" data-id="${t.id}">
        <svg viewBox="0 0 24 24">
          ${t.isRunning?'<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>':'<polygon points="5 3 19 12 5 21 5 3"/>'}
        </svg>
      </button>
    `;const r=o.querySelector(".play-pause-btn");r.onclick=()=>F(t.id),o.addEventListener("contextmenu",k=>{k.preventDefault(),confirm(`"${t.name}" adlı görevi silmek istiyor musunuz?`)&&(a=a.filter(C=>C.id!==t.id),t.isRunning&&L(Date.now()-t.lastStartTime),g(),c())}),b.appendChild(o)}),R.textContent=`${e} Aktif Görev`}function z(n){const e=Math.floor(n/1e3),t=Math.floor(e/3600),s=Math.floor(e%3600/60),i=e%60,o=r=>r.toString().padStart(2,"0");return`${o(t)}:${o(s)}:${o(i)}`}function A(n){const e=Math.floor(n/6e4),t=Math.floor(e/60),s=e%60;return`${t}h ${s}m`}function L(n){l.date!==u()?l={date:u(),ms:n}:l.ms+=n,I()}function B(){let n=0;a.forEach(e=>{e.isRunning&&(n+=Date.now()-e.lastStartTime)}),O.textContent=A(l.ms+n)}function F(n){const e=a.find(s=>s.id===n);if(!e)return;const t=Date.now();if(e.isRunning){const s=t-e.lastStartTime;e.elapsedMs+=s,L(s),e.isRunning=!1}else e.lastStartTime=t,e.isRunning=!0;g(),c()}function K(){v&&clearInterval(v),v=setInterval(()=>{let n=!1;const e=Date.now();a.forEach(t=>{if(t.isRunning){n=!0;const s=t.elapsedMs+(e-t.lastStartTime);if(t.interval>0){const i=t.interval*6e4;s-t.lastNotifiedMs>=i&&(t.lastNotifiedMs=s,q("Zaman Hatırlatıcısı",`"${t.name}" için ${t.interval} dakika doldu!`),g())}}}),n&&(c(),B())},1e3)}x.onclick=()=>{y.classList.add("show"),T.value="",document.getElementById("group-color-picker").style.display="flex",p="cyan",$()};D.onclick=()=>y.classList.remove("show");G.onclick=()=>{const n=T.value.trim(),e=m.value,t=parseInt(P.value)||0;if(!n){alert("Görev adı girmelisiniz!");return}const s={id:"trk_"+Date.now(),name:n,group:e,interval:t,color:p,elapsedMs:0,lastStartTime:0,lastNotifiedMs:0,isRunning:!1};a.unshift(s),g(),t>0&&N(),y.classList.remove("show"),c()};H.onclick=()=>{const n=prompt("Yeni grup adını giriniz:");if(n&&n.trim()){const e=n.trim();d.includes(e)||(d.push(e),J(),h(),E(),m.value=e)}};function $(){M.forEach(n=>{n.dataset.color===p?n.classList.add("active"):n.classList.remove("active")})}M.forEach(n=>{n.onclick=()=>{p=n.dataset.color,$()}});_();
